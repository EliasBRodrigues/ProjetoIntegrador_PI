<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../static/styles/styles.css">
    <title>Página de Registro</title>
</head>
<body>
    {% if error %}
        <div class="flash">{{error}}</div>
    {% endif %}>

    <header class="register-header">
        <div class="register-header__container">
            <img class="register-header__logo" src="../static/img/medicalize_logo.svg" alt="Logo Medicalize">
            <div class="register-header__spacer"></div>
            <div class="register-header__texts">
                <p class="register-header__title">Bem-vindo ao Medicalize</p>
                <p class="register-header__subtitle">Cadastre-se para conhecer nossos recursos</p>
            </div>
        </div>
    </header>

    <main class="register-main">
        <form class="register-form" action="{{url_for('signUp')}}" method="post">
            <div class="register-form__group">
                <label for="email" class="register-form__label">Nome</label>
                <input type="name" name="name" id="name" class="register-form__input" placeholder="Insira seu nome" required>
            </div>
            <div class="register-form__group">
                <label for="password" class="register-form__label">E-mail</label>
                <input type="email" name="email" id="email" class="register-form__input" placeholder="Insira o Email" required>
            </div>
            <div class="register-form__group">
                <label for="password" class="register-form__label">Senha</label>
                <input type="password" name="password" id="password" class="register-form__input" placeholder="Digite sua senha" required>
            </div>
            <div class="register__form-buttons">
                <button class="register-form__button" type="submit" name="btnSignUp" id="btnSignUp">Cadastrar</button>
                <div class="register-form__divider">
                    <p>OU</p>
                </div>
                <a href="#" class="register-form__google">
                    <img src="../static/img/icons/google_icon.svg" alt="" class="register-main__google-icon">
                    Entrar com o Google
                </a>
            </div>
        </form>
    </main>

    <footer class="register-footer">
        <p>Já possui uma conta? <a class="login-footer__link" href="/login">Clique aqui</a></p>
    </footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
        $(function() {
            $('#btnSignUp').click(function() {
                $.ajax({
                    url: '/signup',
                    data: $('form').serialize(),
                    type: 'POST',
                    success: function(response) {
                        console.log(response); alert(response)
                        $('#message').html(response);
                        if(response == 'ok'){
                            window.location.href = '/login';
                        }
                    },
                    error: function(error) {
                        console.log(error);
                        $('#message').html(error);
                    }
                });
            });
        });
    </script> 
</body>
</html>